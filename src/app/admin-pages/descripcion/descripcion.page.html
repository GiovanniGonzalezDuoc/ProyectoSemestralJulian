<ion-header [translucent]="true">
  <app-header-admin></app-header-admin>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-card *ngFor="let datos of Perfiles">
    <ion-card *ngIf="datos.id">
      <ion-card-header>
        <ion-item lines="none">
          <ion-avatar slot="start" class="avatar-container">
            <img [src]="datos.foto" alt="Perfil">
          </ion-avatar>
          <ion-label>
            <h2>{{datos.nombreperfil}}</h2>
            <p>hace {{datos.horas}} horas</p>
          </ion-label>
          <div class="card-menu">
            <ion-button fill="clear" (click)="openPopover($event)">
              <ion-icon name="ellipsis-vertical-outline"></ion-icon>
            </ion-button>
          </div>
        </ion-item>
      </ion-card-header>
      <ion-card-content>
        <h1>{{datos.titulo}}</h1>
      </ion-card-content>

      <ion-card-content>
        <p>
          <span *ngIf="datos.mensaje.length > 70">
            {{ datos.mensaje | slice:0:70 }}...
          </span>
          <span *ngIf="datos.mensaje.length <= 70">
            {{ datos.mensaje }}
          </span>
        </p>
      </ion-card-content>

      <ion-item lines="none">
        <ion-buttons>
          <ion-button class="icon-dimension">
            <ion-icon name="thumbs-up-outline"></ion-icon>
            <p>{{datos.like}}</p>
          </ion-button>
          <ion-button class="icon-dimension">
            <ion-icon name="chatbubble-outline"></ion-icon>
            <p>{{datos.comentarios}}</p>
          </ion-button>
          <ion-button class="icon-dimension">
            <ion-icon name="share-outline"></ion-icon>
          </ion-button>
        </ion-buttons>
        <ion-button fill="clear" slot="end" class="icon-dimension">
          <ion-icon name="bookmark-outline"></ion-icon>
        </ion-button>
      </ion-item>
    </ion-card>
  </ion-card>

  <!-- Sección de Comentarios -->
  <ion-card>
    <ion-card-content>
      <ion-item>
        <ion-textarea [(ngModel)]="nuevoComentario" placeholder="Añadir un comentario..."></ion-textarea>
        <ion-button (click)="agregarComentario()" expand="full">Comentar</ion-button>
      </ion-item>
    </ion-card-content>
  </ion-card>

  <ion-card *ngFor="let datos of comentarios">
    <ion-card>
      <ion-card-header>
        <ion-item lines="none">
          <ion-avatar slot="start" class="avatar-container">
            <img [src]="datos.foto" alt="Perfil">
          </ion-avatar>
          <ion-label>
            <h2>{{datos.nombreperfil}}</h2>
            <p>hace {{datos.horas}} horas</p>
          </ion-label>
          <div class="card-menu">
            <ion-button fill="clear" (click)="openPopover($event)">
              <ion-icon name="ellipsis-vertical-outline"></ion-icon>
            </ion-button>
          </div>
        </ion-item>
      </ion-card-header>
      <ion-card-content>
        <p>
          <span *ngIf="datos.mensajecomentario.length > 70">
            {{ datos.mensajecomentario | slice:0:70 }}...
          </span>
          <span *ngIf="datos.mensajecomentario.length <= 70">
            {{ datos.mensajecomentario }}
          </span>
        </p>
      </ion-card-content>
    </ion-card>
  </ion-card>

  <!-- Popover Menu -->
  <ion-popover [isOpen]="isPopoverOpen" (didDismiss)="closePopover()">
    <ng-template>
      <ion-list>
        <ion-item (click)="handleOption('option1')">Banear</ion-item>
        <ion-item (click)="handleOption('option2')">Eliminar Post</ion-item>
        <ion-item (click)="handleOption('option3')">Suspender</ion-item>
      </ion-list>
    </ng-template>
  </ion-popover>

</ion-content>
