<ion-header [translucent]="true">
  <app-header></app-header>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-card *ngIf="arregloPublicacion && arregloPublicacion.length > 0; else noData">
    <ion-card-header>
      <ion-item lines="none">
        <ion-avatar slot="start" class="avatar-container">
          <img [src]="fotoPredeterminada" alt="Perfil">
        </ion-avatar>
        <ion-label>
          <h2>{{ arregloPublicacion[0].nombre_usuario_publicacion }}</h2>
          <p>Publicacion Creada: {{ arregloPublicacion[0].fecha_publicacion }}</p>
          <p>{{ categorias[arregloPublicacion[0].categoria_publicacion_id_categoria] }}</p>
        </ion-label>
        <div class="card-menu">
          <ion-button fill="clear" (click)="openPopover($event)">
            <ion-icon name="ellipsis-vertical-outline"></ion-icon>
          </ion-button>
        </div>
      </ion-item>
    </ion-card-header>
    <ion-card-content>
      <h1>{{ arregloPublicacion[0].titulo_publicacion }}</h1>
    </ion-card-content>

    <ion-card-content>
      <p>
        <span *ngIf="arregloPublicacion[0].descripcion_publicacion.length > 70">
          {{ arregloPublicacion[0].descripcion_publicacion | slice:0:70 }}...
        </span>
        <span *ngIf="arregloPublicacion[0].descripcion_publicacion.length <= 70">
          {{ arregloPublicacion[0].descripcion_publicacion }}
        </span>
      </p>
    </ion-card-content>

    <ion-item lines="none">
      <ion-buttons>
        <ion-button class="icon-dimension" (click)="like()">
          <ion-icon name="thumbs-up-outline"></ion-icon>
          <p>{{ likes }}</p>
        </ion-button>
        <ion-button class="icon-dimension" (click)="comentario()">
          <ion-icon name="chatbubble-outline"></ion-icon>
          <p></p>
        </ion-button>
        <ion-button class="icon-dimension">
          <ion-icon name="share-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
      <ion-button fill="clear" slot="end" class="icon-dimension" (click)="guardar()">
        <ion-icon name="bookmark-outline"></ion-icon>
      </ion-button>
    </ion-item>
  </ion-card>

  <ng-template #noData>
    <ion-card>
      <ion-card-header>
        <ion-card-title>No se encontró la publicación.</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>Intenta nuevamente más tarde.</p>
      </ion-card-content>
    </ion-card>
  </ng-template>

  <ion-popover [isOpen]="isPopoverOpen" (didDismiss)="closePopover()">
    <ng-template>
      <ion-list>
        <ion-item (click)="handleOption('option1')">Eliminar Post</ion-item>
        <ion-item (click)="handleOption('option2')">Seguir Usuario</ion-item>
      </ion-list>
    </ng-template>
  </ion-popover>
</ion-content>
